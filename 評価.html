<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>教えあいシステム - 回答詳細</title>
    <link rel="stylesheet" href="common.css">
    <style>
        .answer-detail {
            padding: 40px;
        }

        .answer-detail h2 {
            margin-bottom: 20px;
            font-size: 24px;
            color: #333;
        }

        .answer-display-box {
            border: 2px solid #5cb85c; /* 緑の枠 */
            min-height: 200px;
            padding: 20px;
            margin-bottom: 40px;
            background-color: #f9fff9;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            color: #555;
            text-align: center;
        }

        .rating-section {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 40px;
        }

        .rating-section span {
            font-weight: bold;
            font-size: 18px;
        }

        .rating-buttons .rating-button {
            background-color: #A0C1EB; /* S, A, B, Cボタンの色 */
            color: white;
            border: none;
            border-radius: 50%; /* 円形にする */
            width: 50px;
            height: 50px;
            font-size: 20px;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.2s ease;
            margin-right: 10px;
        }

        .rating-buttons .rating-button:hover {
            background-color: #8EB2E0;
            transform: scale(1.05);
        }

        .rating-buttons .rating-button.selected {
            background-color: #4A7FD3; /* 選択時の色 */
            border: 2px solid #335DA6;
        }

        .confirm-button {
            padding: 12px 25px;
            font-size: 18px;
            margin-left: auto; /* 右寄せ */
            display: block;
            width: fit-content;
        }
    </style>
</head>
<body>
    <div class="header">教えあいシステム</div>

    <div class="container answer-detail">
        <h2 id="studentNameDisplay">氏名 (A)</h2> <div class="answer-display-box">
            回答を表示
            </div>

        <div class="rating-section">
            <span>評価</span>
            <div class="rating-buttons">
                <button class="rating-button" data-rating="S" onclick="selectRating(this)">S</button>
                <button class="rating-button" data-rating="A" onclick="selectRating(this)">A</button>
                <button class="rating-button" data-rating="B" onclick="selectRating(this)">B</button>
                <button class="rating-button" data-rating="C" onclick="selectRating(this)">C</button>
            </div>
            <button class="button confirm-button" onclick="confirmRating()">確定</button>
        </div>
    </div>

    <script>
        let selectedRating = null;

        function selectRating(button) {
            // 全ての評価ボタンから'selected'クラスを削除
            const allRatingButtons = document.querySelectorAll('.rating-button');
            allRatingButtons.forEach(btn => btn.classList.remove('selected'));

            // クリックされたボタンに'selected'クラスを追加
            button.classList.add('selected');
            selectedRating = button.dataset.rating; // 選択された評価を保存
            console.log('選択された評価:', selectedRating);
        }

        function confirmRating() {
            if (selectedRating) {
                const studentName = document.getElementById('studentNameDisplay').textContent.replace('氏名 (', '').replace(')', '');
                // ここに評価確定処理（例: API呼び出し）を記述
                console.log(`${studentName}さんの評価を「${selectedRating}」で確定します。`);
                alert(`${studentName}さんの評価を「${selectedRating}」で確定しました！`);
                // 評価確定後、次のアクション（例: 回答者一覧に戻る）
                // window.location.href = 'view_answers.html'; // 例
            } else {
                alert('評価を選択してください。');
            }
        }

        // ページロード時に学生名を設定する（URLパラメータなどから取得）
        window.onload = function() {
            const urlParams = new URLSearchParams(window.location.search);
            const student = urlParams.get('student');
            if (student) {
                document.getElementById('studentNameDisplay').textContent = `氏名 (${student})`;
            }
            // 仮の回答内容を設定
            // document.querySelector('.answer-display-box').innerHTML = 'ここに(A)さんの回答が表示されます。';
        };
    </script>
</body>
</html>